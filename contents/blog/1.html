<!doctype html>
<html lang="zh-CN">
    <head>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>rye - 好用的Python包管理工具</title>
        <link
            rel="alternate"
            type="application/atom+xml"
            title="RSS"
            href="https://geoqiao.github.io/contents/atom.xml" />
        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/slideout/1.0.1/slideout.min.js"></script>
        <link
            rel="stylesheet"
            href="https://geoqiao.github.io/templates/static/css/style.css" />
        <link
            rel="stylesheet"
            href="https://geoqiao.github.io/templates/static/css/pygments.css" />
        <link rel="stylesheet" type="text/css"
            href="https://www.codesky.me/usr/plugins/GoogleCodePrettify/src/github.css" /></head>
    <link rel="icon" type="image/png"
        href="https://geoqiao.github.io/favicon.png">
</head>
<body>
    <div class="container">
        <div id="mobile-navbar" class="mobile-navbar">
            <div class="mobile-header-logo">
                <a href="/" class="logo">Geoqiao</a>
            </div>
            <div class="mobile-navbar-icon icon-out">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>

        <nav
            id="mobile-menu"
            class="mobile-menu slideout-menu slideout-menu-left">
            <ul class="mobile-menu-list">
                <li class="mobile-menu-item">
                    <a href="/"> Home </a>
                </li>

                <li class="mobile-menu-item">
                    <a href="/tags"> Tags </a>
                </li>

                <li class="mobile-menu-item">
                    <a href="/about"> About </a>
                </li>

                <li class="mobile-menu-item">
                    <a href="/contents/atom.xml"> RSS </a>
                </li>
            </ul>
        </nav>
        <header id="header">
    <div class="logo"><a href="/">Geoqiao's Page</a></div>
    <div class="menu">
        <ul>
            <li><a href="/">Home</a></li>
            <li><a href="/tags">Tags</a></li>
            <li><a href="/about">About</a></li>
            <li><a href="/contents/atom.xml">RSS</a></li>
        </ul>
    </div>
</header>
        <main>
<div class="content" id="mobile-panel">
    <article class="post">
        <header class="post__header">
            <h1 class="post__title">rye - 好用的Python包管理工具</h1>
            <div class="post__meta">
                <span class="post__time">2024-01-06</span>
            </div>
        </header>
        <div class="post__content"><p><a href="https://github.com/mitsuhiko/rye">rye</a>是一个 Python 的包管理器，可以更轻松的管理 Python 项目和虚拟环境，作者是流行 web 框架 flask 的作者<a href="https://github.com/mitsuhiko">Armin Ronacher</a></p>
<p>作为一个刚开始学习 Python 的新手，它解决了我碰到的两个难题：</p>
<ol>
<li>使用<code>pip</code>安装包时，经常某些包无法在当前 python 版本安装</li>
<li>不会使用 venv 等虚拟环境管理工具</li>
<li>使用<code>conda</code>时，经常社区还没有适配某些最新版本的包</li>
</ol>
<p>这里引出 rye 主要的几个功能：</p>
<ol>
<li>管理全局的 Python 版本</li>
<li>管理虚拟环境中的 Python 版本</li>
<li>以封装<code>pip</code>和<code>virtualenv</code>的方式，让我不必烦恼如何使用他们</li>
</ol>
<h2>安装 rye</h2>
<p>在 macOS 上，直接运行一下命令即可，同时在 rye 的<a href="https://rye-up.com/guide/installation/#installing-rye">文档</a>也给出了其他系统的安装方式。</p>
<p>例如 macOS：</p>
<blockquote>
<p>To install run you can curl a command which will install the right binary for your operating system and CPU architecture and install it:</p>
<pre><code class="language-shell">curl -sSf https://rye-up.com/get | bash
</code></pre>
</blockquote>
<p><strong>补充</strong>：</p>
<pre><code class="language-shell">rye self update # 升级rye
</code></pre>
<pre><code class="language-shell">rye self uninstall # 卸载rye
</code></pre>
<h2>开始一个新项目</h2>
<p>使用  <code>rye init</code>  初始化一个新项目非常容易。在这里，我开始一个名为： <code>&quot;test-rye&quot;</code>的新项目。</p>
<pre><code class="language-shell">mkdir test-rye  #创建项目文件夹
cd test-rye #在终端进入刚才创建的项目文件夹
rye init . #使用rye初始化项目
</code></pre>
<p>执行初始化之后，rye 会帮我们创建一些默认文件：</p>
<pre><code class="language-shell">tree
├── README.md       # 项目的README文件
├── pyproject.toml  # rye用来管理项目的文件
└── src
    └── test_rye
        └── __init__.py
</code></pre>
<p>现在，我们便可以安装自己想安装的包。假设我这个项目想用来做一些数据分析工作：</p>
<pre><code class="language-shell"># 使用rye安装 numpy pandas scikit-learn xgboost
rye add numpy pandas scikit-learn xgboost # 解析包版本，并添加到pyproject.toml文件中
rye sync # 开始下载文件对应的包
</code></pre>
<p>至此，一个由 rye 管理的项目就创建完成了，我们可以使用 VSCode 打开项目文件夹，并开始写代码了。</p>
<pre><code class="language-shell">code .  # 使用VSCode打开项目文件夹
</code></pre>
<p>此时，我们的项目文件夹结构如下：</p>
<pre><code class="language-shell">tree
├── README.md
├── pyproject.toml
├── requirements-dev.lock
├── requirements.lock
└── src
    └── test_rye
        ├── __init__.py
        └── __pycache__
            └── __init__.cpython-311.pyc
</code></pre>
<p><strong>注意事项</strong>：
当我们的项目需要添加新的依赖时，可以使用<code>rye add &lt;package name&gt;</code> 和 <code>rye sync</code>来安装对应的包，或者通过<code>rye romove &lt;package name&gt;</code>和<code>rye sync</code>来移除对应的包。</p>
<p><code>rye add &lt;package name&gt;</code>和<code>rye romove &lt;package name&gt;</code>只修改<code>pyproject.toml</code>文件，<code>rye sync</code>会按照<code>pyproject.toml</code>文件实际对项目的依赖进行操作。</p>
<h2>修改项目的 Python 版本</h2>
<p>rye 当前为我们的项目安装 Python@3.11 版本，但不必担心，rye 为我们提供了修改项目 Python 版本的命令</p>
<pre><code class="language-shell">rye pin 3.9
rye sync # 所有的修改都需要使用sync命令生效
</code></pre>
<p>此时，我们的项目的 Python 版本就变为了<span class="pangu"></span>Python@3.9</p>
<h2>全局 Python 脚本</h2>
<p>某些情况下，有些包我们想要全局使用，比如<code>black</code>或者<code>ruff</code>来对我们的代码进行格式化。</p>
<pre><code class="language-shell">rye install ruff
</code></pre>
<p>安装之后，就可以在终端全局使用<code>ruff</code>命令了</p>
<p>卸载也很简单：</p>
<pre><code class="language-shell">rye uninstall ruff
</code></pre>
<h2>最后</h2>
<p>rye 还支持一些常规的操作，比如接管全局 python、升级项目中某个依赖或者所有依赖的版本、构建/发布包等等功能，可以通过<a href="https://rye-up.com/guide/">官方文档</a>查看。</p>
</div>
    </article>
</div>

<div class="comments" id="comments"><div id="utterances-container"></div>
</main>
        <footer id="footer">
    <p style="text-align: center;">&copy; 2024 Geoqiao's Page</p>
</footer>
    </div>
    
    <script>
    var container = document.getElementById('utterances-container')
    var script = document.createElement('script')
    script.src = 'https://utteranc.es/client.js'
    script.setAttribute('repo', 'geoqiao/geoqiao.github.io')
    script.setAttribute('issue-number', '1')
    script.setAttribute('theme', 'github-light')
    script.setAttribute('label', 'utterances')
    script.crossorigin = 'anonymous'
    script.async = true

    container.appendChild(script)
    </script>

    <script
        type="text/javascript"
        src="https://geoqiao.github.io/templates/static/js/even.js"></script>
    <script type="text/javascript"
        src="https://geoqiao.github.io/templates/static/js/prettify.js"></script>
    <script
        type="text/javascript">window.onload = function () {var pre = document.getElementsByTagName('pre');for(i=0,l=pre.length;i<l;i++) pre[i].className += " prettyprint linenums";prettyPrint();}</script>
    </body>
</html>